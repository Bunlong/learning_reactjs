<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title></title>
  <script type="text/javascript" src="react.min.js"></script>
  <script type="text/javascript" src="JSXTransformer.js"></script>
  <script type="text/javascript" src="jquery-1.9.1.js"></script>
  <script type="text/javascript" src="masonry.pkgd.js"></script>
  <script type="text/javascript" src="imagesloaded.pkgd.min.js"></script>
  <link rel="stylesheet" href="bootstrap.min.css" />
  <style type="text/css">
    .grid {
      background: #FFF;
      margin-bottom: 88px;
    }

    .grid:after {
      content: '';
      display: block;
      clear: both;
    }

    .grid-sizer, .grid-item {
      width: 32.303%;
      margin-left: 10px;
      margin-bottom: 10px;
    }

    .grid-item {
      float: left;
    }

    .grid-item img {
      display: block;
      max-width: 100%;
    }
  </style>
</head>
<body style="margin-top: 80px;">
  <div class="container">
    <div id="container"></div>
  </div>

  <script type="text/jsx">
    var Photo = React.createClass({
      render: function() {
        return (
          <div>
            <div className="grid-sizer"></div>
            <div className="grid-item">
              <img src={this.props.src} />
            </div>
          </div>
        );
      }
    });

    var PhotoGallery = React.createClass({
      getDataFromServer: function() {
        return [
          {
            url: 'images/pizza_1.jpg',
            caption: 'Pizza'
          },
          {
            url: 'images/pizza_2.jpg',
            caption: 'Pizza'
          },
          {
            url: 'images/pizza_3.jpg',
            caption: 'Pizza'
          },
          {
            url: 'images/pizza_4.jpg',
            caption: 'Pizza'
          },
          {
            url: 'images/pizza_5.jpg',
            caption: 'Pizza'
          },
          {
            url: 'images/pizza_6.jpg',
            caption: 'Pizza'
          },
          {
            url: 'images/pizza_7.jpg',
            caption: 'Pizza'
          },
          {
            url: 'images/pizza_8.jpg',
            caption: 'Pizza'
          },
          {
            url: 'images/pizza_9.jpg',
            caption: 'Pizza'
          },
          {
            url: 'images/pizza_10.jpg',
            caption: 'Pizza'
          },
          {
            url: 'images/pizza_11.jpg',
            caption: 'Pizza'
          },
          {
            url: 'images/pizza_12.jpg',
            caption: 'Pizza'
          },
          {
            url: 'images/pizza_13.jpg',
            caption: 'Pizza'
          },
          {
            url: 'images/pizza_14.jpg',
            caption: 'Pizza'
          },
          {
            url: 'images/pizza_15.jpg',
            caption: 'Pizza'
          },
          {
            url: 'images/pizza_16.jpg',
            caption: 'Pizza'
          },
          {
            url: 'images/pizza_17.jpg',
            caption: 'Pizza'
          }
        ];
      },
      componentDidMount: function() {
        var $grid = $('.grid').masonry({
          itemSelector: '.grid-item',
          percentPosition: true,
          columnWidth: '.grid-sizer'
        });

        $grid.imagesLoaded().progress( function() {
          $grid.masonry();
        }); 
      },
      render: function() {
        var data=this.getDataFromServer();

        var photos = data.map(function(photo) {
          return <Photo src={photo.url} caption={photo.caption} />
        });

        return (
          <div>
            <nav className="navbar navbar-inverse navbar-fixed-top">
                <div className="container">
                  <div className="navbar-header">
                    <button type="button" className="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                      <span className="sr-only">Toggle navigation</span>
                      <span className="icon-bar"></span>
                      <span className="icon-bar"></span>
                      <span className="icon-bar"></span>
                    </button>
                    <a className="navbar-brand">ReactJS PhotoGallery</a>
                  </div>
                </div>
              </nav>

            <div className='grid'>
              {photos}
            </div>
          </div>
        );
      }
    });

    React.render(<PhotoGallery />, document.getElementById('container'));
  </script>
</body>
</html>
